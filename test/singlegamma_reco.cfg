process USER =  {
    
    # include services
    include "Configuration/ReleaseValidation/data/Services.cfi"
    
    # initialize  MessageLogger
    include "FWCore/MessageLogger/data/MessageLogger.cfi"
    replace MessageLogger.cout.threshold = "ERROR"
    replace MessageLogger.cerr.default.limit = 10



    service = RandomNumberGeneratorService
    {
	untracked uint32 sourceSeed = 98765
    }
    
    # The particle data table
    # include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"   


    #input module:
    source = FlatRandomEGunSource 
    { 
	untracked uint32 firstRun  = 1
	untracked int32  maxEvents = 20
	untracked PSet  PGunParameters =
	{
	    # you can request more than 1 particle
	    #untracked vint32  PartID = { 211, 11, -13 }
	    untracked vint32 PartID = {22} 
	    untracked double MinEta = -3
	    untracked double MaxEta = 3
	    untracked double MinPhi = -3.14159265358979323846  # it must be in radians
	    untracked double MaxPhi =  3.14159265358979323846
	    untracked double MinE   = 0
	    untracked double MaxE   = 200
	}      
	untracked int32 Verbosity = 0 # for printouts, set it to 1 (or greater)   
    }


    ###############################
    # include the 'official' simulation/reconstruction file
    # this file contains the path definitions for everything necessary to reconstruct things.
    
    include "IOMC/EventVertexGenerators/data/VtxSmearedGauss.cfi"
    include "SimG4Core/Application/data/g4SimHits.cfi"
    
    # replace g4SimHits.Generator.HepMCProductLabel = "source"
    
    # This is the full sequence of digitizers 
    # (Pixels, SiStrips, Ecal, Hcal, Muon(CSC,DT,RPC)
    # MixingModule included (in the zero-pileup mode)
    # it "returns" sequence called doAllDigi which can
    # be directly placed in the path
    #
    include "SimG4Core/Application/data/DigiWithEcalZeroSuppression.cff"
    
    # THERE IS NO VERTEX SMEARING !
    sequence doG4SimHitsDigiEcalZeroSup = { g4SimHits, doAllDigiWithEcalZeroSup }
    
    include "Configuration/Examples/data/RECO.cff"
    
 
    ###############################
    #output module:
    module GEN-SIM-DIGI-RECO = PoolOutputModule
    {
	untracked string fileName = "singlegamma_reco.root" 
	untracked vstring outputCommands = 
	{
	    "keep *",
	    "drop *_muoncscdigi_*_*",
	    "drop *_muondtdigi_*_*",
	    "drop *_hcalDigis_*_*",
	    "drop *_ecalDigis_*_*",
	    "drop *_siStripDigis_*_*",
	    "drop *_siPixelDigis_*_*",
	    "drop *_ecalUnsuppressedDigis_*_*",
	    "drop *_ecalPreshowerDigis_*_*",
	    "drop *_ecalWeightUncalibRecHit_*_*"
	}
    }

     
    ###############################
    # now define what you want to do
    path p = {doG4SimHitsDigiEcalZeroSup, reconstruction}
    # digitization and reconstruction are sequences of actions that are defined in the .cff files that were included
    
    endpath outpath = {GEN-SIM-DIGI-RECO}	

}
