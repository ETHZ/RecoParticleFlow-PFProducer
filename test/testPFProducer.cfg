process Demo =  {
	#keep the logging output to a nice level
	#include "FWCore/MessageLogger/data/MessageLogger.cfi"
  	service = MessageLogger
  	{
    		untracked vstring destinations = {"cout"}

    		untracked vstring categories = {
      			"PFProducer"
    		}
    		untracked vstring debugModules = { "pf" }
    		untracked PSet cout = {
		#	untracked string threshold = "DEBUG"
      			untracked string threshold = "INFO"
      			untracked PSet INFO = { untracked int32 limit = -1 }
      			untracked PSet DEBUG = { untracked int32 limit = -1 }
      			untracked PSet PFProducer = { untracked int32 limit = 1000000 }
    		}
  	}

	include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"

	# magnetic field (allready defined in geometryForClustering.cff) 
	include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

        # common geometry
	include "Geometry/CMSCommonData/data/cmsRecoIdealGeometryXML.cfi"

	# tracker geometry
	#include "Geometry/TrackerRecoData/data/trackerRecoGeometryXML.cfi"
 
	# tracker geometry
	include "Geometry/TrackerGeometryBuilder/data/trackerGeometry.cfi"
 
	# tracker numbering
	include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"

	# KFUpdatoerESProducer
	include "TrackingTools/KalmanUpdators/data/KFUpdatorESProducer.cfi"

	# Chi2MeasurementEstimatorESProducer
	include "TrackingTools/KalmanUpdators/data/Chi2MeasurementEstimatorESProducer.cfi"

	# KFTrajectoryFitterESProducer
	include "TrackingTools/TrackFitters/data/KFTrajectoryFitterESProducer.cfi"

	# KFTrajectorySmootherESProducer
	include "TrackingTools/TrackFitters/data/KFTrajectorySmootherESProducer.cfi"

	# KFFittingSmootherESProducer
	include "TrackingTools/TrackFitters/data/KFFittingSmootherESProducer.cfi"

	# PropagatorWithMaterialESProducer
	include "TrackingTools/MaterialEffects/data/MaterialPropagator.cfi"

	# PropagatorWithMaterialESProducer
	include "TrackingTools/MaterialEffects/data/OppositeMaterialPropagator.cfi"

	# stripCPE
	include "RecoLocalTracker/SiStripRecHitConverter/data/StripCPEfromTrackAngle.cfi"

	# pixelCPE
	include "RecoLocalTracker/SiPixelRecHits/data/PixelCPEParmError.cfi"

	#TransientTrackingBuilder
	include "RecoTracker/TransientTrackingRecHit/data/TransientTrackingRecHitBuilder.cfi"

	source = PoolSource
	{
		# Number of events program should run
		# 100 single electrons, pt=50 GeV, uniform eta and phi in both barrel and endcap
		# untracked vstring fileNames = {'file:1mu.root'}
		# untracked vstring fileNames = {'file:/home/Colin/CMS/CMSSW_0_8_0_pre2/src/Workdir/pi0_12_reco.root'}
		untracked vstring fileNames = {'file:/home/Colin/CMS/CMSSW_0_8_0_pre2/src/Workdir/evtgen_jets.root'}
		untracked int32 maxEvents = -1
	}



	
	module pfcluster = PFClusterProducer { 

		untracked bool   process_Ecal       = true	
		untracked bool   process_Hcal       = true
		untracked bool   process_PS         = false

		untracked double thresh_Ecal_Barrel = 0.2
		untracked double thresh_Seed_Ecal_Barrel = 0.3	
		untracked double thresh_Ecal_Endcap = 0.2
		untracked double thresh_Seed_Ecal_Endcap = 0.9	

		untracked double thresh_PS = 0.0001
		untracked double thresh_Seed_PS = 0.001	

		untracked int32  depthCor_Mode = 1
		untracked double depthCor_A =  0.89
		untracked double depthCor_B =  7.3
		untracked double depthCor_A_preshower = 0.89
		untracked double depthCor_B_preshower = 4.0

		untracked double thresh_Hcal_Barrel = 1.0
		untracked double thresh_Seed_Hcal_Barrel = 1.4	
		untracked double thresh_Hcal_Endcap = 1.0
		untracked double thresh_Seed_Hcal_Endcap = 1.4	
	}

	module pf = PFProducer {
		# Tracking algorithms
		string Fitter      = "KFFittingSmoother"   
		string Propagator  = "PropagatorWithMaterial" 
		string TTRHBuilder = "WithTrackAngle"
		# Input/output collections for tracks
		string TrackCandidateCollection = "CkfTrackCandidates"
        	string PFRecTrackCollection     = "PFRecTrackCollection"
	}
  
	module o2 = PoolOutputModule
  	{
     		untracked string fileName = "test.root" 
     		untracked vstring outputCommands = 
     		{
	       		"drop *",
			"keep recoPFRecHits_*_*_*",
			"keep recoPFRecTracks_*_*_*"
     		}
  	}

# 	path p = {pfcluster, pf} 
 	path p = {pfcluster,pf} 
  	endpath outpath = { o2 }
}
